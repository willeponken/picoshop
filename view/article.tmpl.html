{{ template "header" . }}

<div class = "midbox">
	{{ with .Data.Article }}
	<h1>{{ .Name }}</h1>
	<img class="article" src="/static/image/{{ .ImageName }}" alt="{{ .Name }} image"></img>
	<p>{{ .Description }}</p>
	<h3>Price: {{ .Price }}</h3>
	<h3>Comments</h3>
	{{ range $element := $.Data.Comments }}
		<td>{{ $element.Text}}</td>
	{{ end }}

	{{ if (context "Customer") }}
	<form action="/cart?article={{ .Id }}" method="PUT">
		<input type="hidden" name="_method" value="PUT">
		<input type="hidden" name="article" value="{{ .Id }}">
		<button type="submit">Add to cart</button>
	</form>

	<h2>Comment</h2>
	<form action="/article?id={{ .Id }}" method="POST">
            <input type="text" id="comment" name="text">
            <button type="submit">Submit</button>
        </form>
	{{ else }}
	<p><em>Please login to purchase or comment on this product.</em></p>
	{{ end }}
	{{ end }}
    </table>
</div>
{{ template "footer" }}
